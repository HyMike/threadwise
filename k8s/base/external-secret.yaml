# External Secrets Operator integration
# This will be populated by ESO from your secret store (Vault, AWS Secrets Manager, etc.)
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: threadwise-secrets
  namespace: threadwise
  labels:
    app: threadwise
spec:
  # Refresh interval
  refreshInterval: 1h
  
  # Reference to your SecretStore (you'll create this separately)
  secretStoreRef:
    name: vault-backend  # Change this to your SecretStore name
    kind: ClusterSecretStore  # or SecretStore if namespace-scoped
  
  # Target secret that will be created
  target:
    name: threadwise-secrets
    creationPolicy: Owner
  
  # Map external secrets to Kubernetes secret keys
  data:
    - secretKey: slack-bot-token
      remoteRef:
        key: threadwise/slack-bot-token  # Path in your secret store
    
    - secretKey: slack-channel-id
      remoteRef:
        key: threadwise/slack-channel-id
    
    - secretKey: llm-api-key
      remoteRef:
        key: threadwise/llm-api-key
    
    # Add more secrets as needed
    # - secretKey: database-url
    #   remoteRef:
    #     key: threadwise/database-url

